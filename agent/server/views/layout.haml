-# coding: UTF-8
!!! Strict
%html
  %head
    %title= "运筹在握@#{ENV['HOSTNAME']}"
    %meta{'http-equiv' => 'content-type', content: 'text/html', charset: 'UTF-8'}/
    %meta{'http-equiv' => 'X-UA-Compatible', content: 'IE=edge'}/
    %meta{name: 'viewport', content: 'width=device-width, initial-scale=1'}/
    %meta{name: 'renderer', content:'webkit'}/
    %meta{name: 'keywords', content: "sypctl,sypctl-server"}/
    %meta{name: 'description', content: "shengyiplus controll"}/
    %link{href: "/images/favicon.png", rel: 'shortcut icon'}/
    %link{href: asset_path('application.css'), rel:"stylesheet"}

  %body
    .container#main
      .row
        .col-sm-12
          = yield

    .container#footer
      .row.center
        .footer &copy; sypctl.com

    .system-notify.top-right
    
    %script{src: asset_path('application.js')}
    :javascript
      let flashString = '#{flash_message}',
          flash = {}
      if(flashString.length) {
        try {
          flash = JSON.parse(flashString)
          Object.keys(flash).forEach(function(key) { 
            window.App.addNotify(flash[key], key)
          })
        } catch(e) {
          window.App.addInfoNotify(flashString)
        }
      }
    